### MVC

M 表示 Model 也就是数据模型，V 表示 View 也就是界面视图，C 表示 Controller 也就是控制器，用来协调用户操作、Model、和 View。但是 **MVC 只是给出了这样一个大致的指导原则，并没有具体指明 MVC 各个部分应该承担具体什么职责，相互之间应该如何交互**。这些很大程度上都是由开发工具或者开发框架定义的，如果工具或者框架没有定义，那么就完全靠开发人员自由发挥了。

#### 客户端MVC

控制器负责对模型中的数据进行更新，而视图向模型中请求数据；当有用户的行为触发操作时，会有控制器更新模型，并通知视图进行更新，在这时视图向模型请求新的数据。所以在客户端中，一般Controller的工作量非常大（响应用户事件，更新视图，同步模型，管理视图和模型，应用生命周期以及页面生命周期）。执行流程大致为：V->C->M->C->V，可以看出Controller是沟通View和Model的桥梁，并且项目大部分的业务逻辑位于Controller层，而不是在Model层，Model层只起到了数据定义的作用（因此，客户端代码优化的重要方向就是把部分业务逻辑迁移到Model层）。

#### 服务端MVC

View层是界面，Model层是业务逻辑，Controller层用来调度View层和Model层，将用户界面和业务逻辑合理的组织在一起，起粘合剂的效果。所以Controller中的内容能少则少，这样才能提供最大的灵活性。比方说，有一个View会提交数据给Model进行处理以实现具体的行为，View通常不会直接提交数据给Model，它会先把数据提交给Controller，然后Controller再将数据转发给Model。假如此时程序业务逻辑的处理方式有变化，那么只需要在Controller中将原来的Model换成新实现的Model就可以了，**控制器的作用就是这么简单， 用来将不同的View和不同的Model组织在一起，顺便替双方传递消息，仅此而已。**所以在服务端中，一般Model的工作量非常大（维护着数据，同时封装业务逻辑）。执行流程大致为：C->M->V，控制器的代码量非常少，接受用户的输入并调用模型和视图去完成用户的需求，控制器本身不输出任何东西和做任何处理。

### 三层架构

服务端MVC架构会有以下问题：

- 前后端分离，大多数场景下已不再需要服务端渲染`View`；
- `Model`层级的代码既维护着数据，也封装着业务逻辑，随着业务逻辑变得越来越复杂，这一层功能逻辑会变得越来越臃肿不易维护；
- 对于团队管理来讲，`Controller`和`Model`的职责边界比较模糊，很难保证参差不齐的团队成员能够清晰地认识到`Controller`层并不应当封装业务逻辑。对于开发人员写好代码的要求会比较高。

针对以上三个问题，推荐使用三层架构的模式。传统的三层架构设计分为以下三个部分：

- **UI（表示层）**：`User Interface`位于三层构架的最上层，与用户直接接触，主要是`B/S`中的 `WEB`页面，也可以是`API`接口。表示层的主要功能是实现系统数据的传入与输出。换句话说，表示层就是实现用户界面/`API`接口功能，将用户的需求传达和反馈，调用BLL完成业务逻辑，保证用户体验。
- **BLL（业务逻辑层）**：`Business Logic Layer`的功能是对具体问题进行逻辑判断与执行操作，接收到表现层`UI`的用户指令后，会连接数据访问层`DAL`，业务逻辑层在三层构架中位于表示层与数据层中间位置，同时也是表示层与数据层的桥梁，实现三层之间的数据连接和指令传达，可以对接收数据进行逻辑处理，实现数据的增删改查等功能，并将处理结果反馈到表示层`UI`中，实现软件功能。
- **DAL（数据访问层）**：`Data Access Layer`是数据库的主要操控系统，实现数据的增删改查等操作，并将操作结果反馈到业务逻辑层`BLL`。在实际运行的过程中，数据访问层没有逻辑判断能力，为了实现代码编写的严谨性，提高代码阅读程度，一般软件开发人员会在该层中实现通用数据能力进行封装（例如通过`ORM`组件）来保证数据访问层`DAL`数据处理功能。 

但是在实际开发三种，一般会增加**Model层（模型定义层）**，它不属于三层中的任何一层，但是却尤其重要。模型定义也常用`Entity`实体对象来表示，主要用于数据库表的映射对象，在信息系统软件实际开发的过程中，要建立对象实例，将关系数据库表采用对象实体化的方式表现出来，辅助软件开发中对各个系统功能的控制与操作执行。建立实体类库，进而实现各个结构层的参数传输，提高代码的阅读性。从本质上看，实体类库主要服务于表示层、业务逻辑层以及数据访问层，在三层之间进行数据参数传输，强化数据表示的简约性。需要注意区分的是，这里的`Model`和`MVC`设计模式中的`Model`虽然都是一个名字但是差别巨大，职责完全不同。

在三层架构设计中，`UI`表示层即相当于`MVC`的`View`和`Controller`层，原本在`MVC`中这两层的逻辑应当是比较"轻量"的，因此被合并为一层进行统一管理也可以理解。比较重要的一点是，原本`MVC`中的`Model`被拆分为了`BLL`和`DAL`，即将业务逻辑与数据访问进行分离，将原本臃肿的`Model`进行了进一步的解耦，有利于项目的更好维护。

### MVVM

### 





